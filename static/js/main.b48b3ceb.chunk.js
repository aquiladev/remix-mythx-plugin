(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{141:function(e,t,a){e.exports=a.p+"static/media/remix.0cc3e824.svg"},142:function(e,t,a){e.exports=a.p+"static/media/mythx.5fc6cc7c.png"},143:function(e,t,a){e.exports=a.p+"static/media/plus.bd770134.svg"},144:function(e,t,a){e.exports=a(318)},151:function(e,t,a){},179:function(e,t){},181:function(e,t){},218:function(e,t){},219:function(e,t){},318:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(25),c=a.n(s),o=(a(151),a(45)),i=a(46),l=a(48),u=a(47),m=a(49),d=a(68),p=(a(152),a(38)),f=a(36),g=a.n(f),h=a(15),v=a(9),b=a(28),y=a(69),w=a(5),E=a(133),O=a(320),j=a(37),x=a(29),N=a(134),k=a(135),C=a.n(k),S=a(136),I=function(e,t){return e||2===t},A=function(e){return e.map(function(e){var t=e.messages,a=Object(S.a)(e,["messages"]),n=function(e){return e.map(function(e){return JSON.stringify(e)}).reduce(function(e,t){return-1===e.indexOf(t)&&e.push(t),e},[]).map(function(e){return JSON.parse(e)})}(t),r=function(e){return e.reduce(function(e,t){var a=t.fatal,n=t.severity;return I(a,n)?e:e+1},0)}(n),s=function(e){return e.reduce(function(e,t){var a=t.fatal,n=t.severity;return I(a,n)?e+1:e},0)}(n);return Object(v.a)({},a,{messages:n,errorCount:s,warningCount:r})})},L={High:2,Medium:1},P=new C.a,z=function(e,t){var a;a=e.swcID?"https://smartcontractsecurity.github.io/SWC-registry/docs/"+e.swcID:"N/A";var n,r,s={fatal:!1,ruleId:e.swcID,ruleLink:a,message:"".concat(e.description.head),description:"".concat(e.description.tail),severity:L[e.severity]||1,mythXseverity:e.severity,line:-1,column:0,endLine:-1,endCol:0},c=P.getLinebreakPositions(t);if(e.locations.length){var o=function(e,t){var a=e.split(":"),n={length:parseInt(a[1],10),start:parseInt(a[0],10)},r=P.convertOffsetToLineColumn(n,t);return[r.start,r.end]}(e.locations[0].sourceMap.split(";")[0],c),i=Object(b.a)(o,2);n=i[0],r=i[1]}return n&&(s.line=n.line,s.column=n.column,s.endLine=r.line,s.endCol=r.column),s},M=function(e,t){var a=t.map(function(t){return function(e,t){var a=e.issues,n=e.sourceList,r={};for(var s in a.map(function(e){var a=function(e){if(e.locations.length){var t=/(\d+):(\d+):(\d+)/g.exec(e.locations[0].sourceMap);return t?t[3]:0}return 0}(e),s=n[a].replace(/^\//,"");r[s]||(r[s]={errorCount:0,warningCount:0,fixableErrorCount:0,fixableWarningCount:0,filePath:s,messages:[]});var c={error:"File not found"};t.sources[s]&&(c=z(e,t.sources[s].content)),r[s].messages.push(c)}),r)r.hasOwnProperty(s)&&(r[s].warningCount=r[s].messages.reduce(function(e,t){var a=t.fatal,n=t.severity;return I(a,n)?e:e+1},0),r[s].errorCount=r[s].messages.reduce(function(e,t){var a=t.fatal,n=t.severity;return I(a,n)?e+1:e},0));return Object.values(r)}(t,e)}).reduce(function(e,t){return e.concat(t)},[]);return A(a)};var _=function(e){var t=e.report,a=e.highlightIssue;return r.a.createElement(r.a.Fragment,null,t.message&&r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-md-6 offset-md-3"},r.a.createElement("div",{className:"alert alert-success w-100",role:"alert"},t.message))),t.list&&r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-md-6 offset-md-3"},t.list.map(function(e,t){var n=e.errorCount+e.warningCount,s=function(e,t){return"".concat(e," ").concat(1===e?t:"".concat(t,"s"))};return r.a.createElement("div",{key:t,className:"border-bottom pt-2 pb-2"},r.a.createElement("div",{className:"text-truncate font-weight-bold"},e.filePath),e.messages.map(function(t,n){return r.a.createElement("div",{key:n,className:"pl-3"},t.error?r.a.createElement("div",{className:"alert alert-danger p-1"},t.error):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{type:"button",className:"btn ".concat(I(t.fatal,t.severity)?"btn-danger":"btn-warning"," text-left p-1 mb-1 w-100"),onClick:function(){a(e,t)}},r.a.createElement("span",{className:"pr-2"},"[".concat(t.line+1,":").concat(t.column,"]")),r.a.createElement("span",{title:"".concat(t.description),style:{cursor:"help"}},"".concat(t.message)),t.ruleId&&r.a.createElement("a",{href:t.ruleLink,className:"pl-1"},"[",t.ruleId,"]"))))}),!!n&&r.a.createElement("div",null,"\u2716 ".concat(s(n,"issue")," (").concat(s(e.errorCount,"error"),", ").concat(s(e.warningCount,"warning"),")")))}))))},R="::",T="remix-mythx-plugin",D={address:"0x0000000000000000000000000000000000000000",pwd:"trial"},F="Access token has expired or is invalid! Please login again.",q=function(e){function t(e){var a;Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).analyze=Object(y.a)(g.a.mark(function e(){var t,n,r,s,c,o,i,l,u,m,d,p,f,y,w;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,n=t.address,r=t.pwd,s=t.compilations,c=t.selected,o=t.analyses,i=t.reports,l=c.split(R),u=Object(b.a)(l,1),m=u[0],d=new E.Client(n,r,"remythx"),e.next=5,a.login(d);case 5:return p=e.sent,a.setState({analyses:Object(v.a)({},o,Object(h.a)({},c,null)),isAnalyzig:!0,jwt:p}),e.next=9,a.props.client.editor.discardHighlight();case 9:return e.prev=9,f=a.getRequestData(),e.next=13,d.analyze(f);case 13:return y=e.sent,e.next=16,d.getDetectedIssues(y.uuid);case 16:w=e.sent,a.setState({analyses:Object(v.a)({},o,Object(h.a)({},c,w)),isAnalyzig:!1}),a.handleResult(s[m].source,w),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),a.setState({analyses:Object(v.a)({},o,Object(h.a)({},c,null)),reports:Object(v.a)({},i,Object(h.a)({},c,{list:[{messages:[{error:e.t0.message||e.t0}]}]})),isAnalyzig:!1});case 24:case"end":return e.stop()}},e,null,[[9,21]])})),a.login=function(e){var t=a.state.jwt;if(t)try{return e.loginWithToken(t),t}catch(n){if(n.message!==F)throw n}return e.login()};var n=localStorage.getItem(T)||"{}",r=JSON.parse(n),s=r.address||D.address;return a.state={address:s,pwd:r.pwd||D.pwd,jwt:null,compilations:{},selected:"",contractList:[],isAnalyzig:!1,analyses:{},reports:{},creadOpen:s===D.address,infoTooltipOpen:!1},a.init=a.init.bind(Object(w.a)(a)),a.login=a.login.bind(Object(w.a)(a)),a.saveCredentials=a.saveCredentials.bind(Object(w.a)(a)),a.analyze=a.analyze.bind(Object(w.a)(a)),a.getRequestData=a.getRequestData.bind(Object(w.a)(a)),a.handleResult=a.handleResult.bind(Object(w.a)(a)),a.highlightIssue=a.highlightIssue.bind(Object(w.a)(a)),a.init(),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"init",value:function(){var e=this,t=this.props.client;t.solidity.getCompilationResult().then(function(t){if(t){var a=t.data,n=t.source;if(n){var r=Object.keys(a.contracts[n.target]);e.setState({compilations:Object(v.a)({},e.state.compilations,Object(h.a)({},n.target,{source:n,data:a})),selected:"".concat(n.target).concat(R).concat(r[0]),contractList:[].concat(Object(p.a)(e.state.contractList),Object(p.a)(e.getContracts(a,n.target)))})}}}),t.on("solidity","compilationFinished",function(t,a,n,r){var s=Object.keys(r.contracts[t]),c=new Set([].concat(Object(p.a)(e.state.contractList),Object(p.a)(e.getContracts(r,t))));e.setState({compilations:Object(v.a)({},e.state.compilations,Object(h.a)({},t,{source:a,data:r})),selected:"".concat(t).concat(R).concat(s[0]),contractList:Array.from(c)})})}},{key:"getContracts",value:function(e,t){var a=e.contracts,n=(void 0===a?[]:a)[t]||{};return Object.keys(n).map(function(e){return"".concat(t).concat(R).concat(e)})}},{key:"saveCredentials",value:function(){var e=this.state,t=e.address,a=e.pwd;localStorage.setItem(T,JSON.stringify({address:t,pwd:a}))}},{key:"getRequestData",value:function(){var e=this.state,t=e.compilations,a=e.selected.split(R),n=Object(b.a)(a,2),r=n[0],s=n[1],c=t[r],o=c.data,i=void 0===o?{}:o,l=c.source,u=void 0===l?{}:l,m=i.contracts,d=void 0===m?[]:m,p=i.sources,f=void 0===p?{}:p,g=d[r],h=g[s].evm.bytecode,v=g[s].evm.deployedBytecode,y={contractName:s,bytecode:h.object,sourceMap:h.sourceMap,deployedBytecode:v.object,deployedSourceMap:v.sourceMap,analysisMode:"quick",mainSource:r,sourceList:Object.keys(u.sources),sources:{}};if(Object.keys(f).reduce(function(e,t){return e&&!!f[t].ast},!0))for(var w in u.sources)u.sources.hasOwnProperty(w)&&(y.sources[w]={ast:f[w].ast});else for(var E in u.sources)u.sources.hasOwnProperty(E)&&(y.sources[E]={source:u.sources[E].content});return y}},{key:"handleResult",value:function(e,t){var a=this.state,n=a.selected,r=a.reports,s=M(e,t);0===s.length?this.setState({reports:Object(v.a)({},r,Object(h.a)({},n,{message:"\u2714 No errors/warnings found in ".concat(n)}))}):this.setState({reports:Object(v.a)({},r,Object(h.a)({},n,{list:s}))})}},{key:"highlightIssue",value:function(){var e=Object(y.a)(g.a.mark(function e(t,a){var n,r;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={start:{line:a.line,column:a.column},end:{line:a.endLine,column:a.endCol}},r=1===a.severity?"#ffd300":"#ff0000",e.next=4,this.props.client.editor.highlight(n,t.filePath,r);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.contractList,n=t.selected,s=t.isAnalyzig,c=t.analyses,o=t.reports,i=t.creadOpen,l=n.split(R),u=Object(b.a)(l,1)[0];return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row border-bottom pb-3"},r.a.createElement("div",{className:"col-md-6 offset-md-3"},r.a.createElement("div",{className:"btn btn-light btn-block text-left rounded-0 border-0",style:{cursor:"pointer"},onClick:function(){e.setState({creadOpen:!i})}},"Credentials",r.a.createElement(j.a,{className:"ml-2",icon:x.d,id:"cred_info"}),r.a.createElement(j.a,{icon:i?x.a:x.b,style:{position:"absolute",right:24,top:10}}),r.a.createElement(O.a,{placement:"right",isOpen:this.state.infoTooltipOpen,autohide:!1,target:"cred_info",toggle:function(){e.setState({infoTooltipOpen:!e.state.infoTooltipOpen})}},"In order to use MythX APIs you need to have credentials. You can use the trial credential, but analysis's result will be limited. In order to get credential you need to ",r.a.createElement("a",{href:"https://mythx.io/",target:"_blank",rel:"noopener noreferrer",className:"text-nowrap"},"sign up"))),r.a.createElement("div",{className:i?null:"collapse"},r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"address"},"Address"),r.a.createElement("input",{type:"text",className:"form-control",id:"address","aria-describedby":"emailHelp",placeholder:"Address",onChange:function(t){return e.setState({address:t.target.value})},defaultValue:this.state.address})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"pwd"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",id:"pwd",placeholder:"Password",onChange:function(t){return e.setState({pwd:t.target.value})},defaultValue:this.state.pwd})),r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.saveCredentials},"Save"))))),r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-md-6 offset-md-3"},u?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-group"},r.a.createElement("select",{className:"form-control",value:n,onChange:function(t){return e.setState({selected:t.target.value})},disabled:s},a.map(function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))),r.a.createElement("div",null,r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.analyze,disabled:s},s?r.a.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}):r.a.createElement("span",null,"Analyze")),r.a.createElement(j.a,{className:"ml-2",icon:x.d,id:"analysis_info"}),r.a.createElement(O.a,{placement:"right",isOpen:this.state.analysisTooltipOpen,autohide:!0,target:"analysis_info",toggle:function(){e.setState({analysisTooltipOpen:!e.state.analysisTooltipOpen})}},"Analysis can take couple of minutes"),c[n]&&r.a.createElement(N.CopyToClipboard,{text:JSON.stringify(c[n])},r.a.createElement("button",{type:"button",className:"btn float-right",title:"Copy raw report to clipboard"},r.a.createElement(j.a,{className:"ml-2",icon:x.c}),r.a.createElement("span",{className:"pl-1"},"Raw report"))))):r.a.createElement("div",{className:"alert alert-warning w-100",role:"alert"},"You need to compile your contract first!"))),r.a.createElement(_,{report:o[n]||{},highlightIssue:this.highlightIssue}))}}]),t}(r.a.Component),J=a(72);var H=function(e){var t=e.isPlugin;return r.a.createElement("div",{className:"position-absolute text-center w-100 pb-1".concat(t?"":" text-white"),style:{fontSize:12,bottom:0}},r.a.createElement("a",{href:"https://github.com/aquiladev/remix-mythx-plugin/releases/tag/v".concat(J.version),target:"_block",rel:"noopener noreferrer"},"v",J.version)," | ",r.a.createElement("a",{href:"https://github.com/aquiladev/remix-mythx-plugin",target:"_blank",rel:"noopener noreferrer"},"GitHub")," | ",r.a.createElement("a",{href:"https://discord.gg/VhdtjCh",target:"_blank",rel:"noopener noreferrer"},"Get support"))},W=a(141),B=a.n(W),V=a(142),X=a.n(V),G=a(143),Y=a.n(G);var $=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"h-100",style:{background:"#012A3E"}},r.a.createElement("div",{className:"d-flex align-items-end flex-column",style:{height:"50%"}},r.a.createElement("div",{className:"mt-auto pb-5 w-100"},r.a.createElement("h1",{className:"display-1 text-white",style:{textAlign:"center"}},"re:MythX"))),r.a.createElement("div",{className:"text-center pt-4"},r.a.createElement("a",{href:"https://remix.ethereum.org",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{src:B.a,alt:"remix",style:{height:120,width:120,verticalAlign:"top"}})),r.a.createElement("img",{src:Y.a,alt:"plus",className:"pl-5 pr-5",style:{height:100,width:140}}),r.a.createElement("a",{href:"https://mythx.io/",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{src:X.a,alt:"mythx",style:{height:130,width:180,verticalAlign:"top"}})))),r.a.createElement(H,{isPlugin:!1}))},K={},Q=function(e){function t(e){var a;Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={plugin:!1};return(K=Object(d.createIframeClient)({customApi:d.remixApi,devMode:{port:8080}})).onload(function(){a.setState({plugin:!0})}),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.plugin;return r.a.createElement(r.a.Fragment,null,e?r.a.createElement("div",{style:{position:"relative",minHeight:"100vh"}},r.a.createElement("main",null,r.a.createElement(q,{client:K})),r.a.createElement(H,{isPlugin:!0})):r.a.createElement($,null))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},72:function(e){e.exports={name:"remix-mythx-plugin",version:"0.1.2",private:!0,dependencies:{"@fortawesome/fontawesome-svg-core":"1.2.19","@fortawesome/free-solid-svg-icons":"5.9.0","@fortawesome/react-fontawesome":"0.1.4",bootstrap:"4.3.1",eslint:"5.16.0",mythxjs:"1.1.0",react:"^16.8.6","react-copy-to-clipboard":"5.0.1","react-dom":"^16.8.6","react-scripts":"3.0.1",reactstrap:"8.0.0","remix-lib":"0.4.6","remix-plugin":"0.0.2-alpha.7"},devDependencies:{"release-it":"12.3.0"},scripts:{start:"react-scripts start",build:"react-scripts build",test:"react-scripts test",eject:"react-scripts eject",release:"release-it --no-npm.publish"},eslintConfig:{extends:"react-app"},browserslist:{production:[">0.2%","not dead","not op_mini all"],development:["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}}},[[144,1,2]]]);
//# sourceMappingURL=main.b48b3ceb.chunk.js.map